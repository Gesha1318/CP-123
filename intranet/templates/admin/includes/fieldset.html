{% if fieldset.name %}<h2>{{ fieldset.name }}</h2>{% endif %}
{% if fieldset.description %}
<div class="description">{{ fieldset.description|safe }}</div>
{% endif %}

{% for line in fieldset %}
{% with line.fields|length as field_count %}
<div class="form-group{% if field_count == 1 and line.errors %} errors{% endif %}{% if not line.has_visible_field %} hidden{% endif %}{% for field in line %}{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% endfor %}">
  <div class="form-row">
    {% for field in line %}
    <div class="{% if field_count != 1 %} col-auto {% else %} col-sm-3 {% endif %}">
      <label class="text-left" for="id_{{ field.field.name }}">
        {{ field.field.label|capfirst }}
        {% if field.field.field.required %}
        <span class="text-red">* </span>
        {% endif %}
      </label>
    </div>
    <div class="{% if field_count != 1 %} col-auto fieldBox {% else %} col-sm-7 {% endif %}{% if field.field.name %} field-{{ field.field.name }}{% endif %}">
      {% if field.is_readonly %}
      <div class="readonly">{{ field.contents }}</div>
      {% else %}
      {{ field.field }}
      {% endif %}
      {% if field.field.help_text %}
      <div class="help">{{ field.field.help_text|safe }}</div>
      {% endif %}
      {% if field.errors %}
      <p class="errornote">
        {{ field.errors|striptags }}
      </p>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</div>
{% endwith %}
{% endfor %}